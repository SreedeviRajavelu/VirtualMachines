
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sreedevirajavelu.github.io/VirtualMachines/Docker_Macvlan_Network/">
      
      
        <link rel="prev" href="../Docker_Networks/">
      
      
        <link rel="next" href="../DockerEngine_Ubuntu/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Docker Macvlan Network - Sree Devi’s Documentation on Virtual Machines, Docker & Networking</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-macvlan-network" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sree Devi’s Documentation on Virtual Machines, Docker &amp; Networking" class="md-header__button md-logo" aria-label="Sree Devi’s Documentation on Virtual Machines, Docker & Networking" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sree Devi’s Documentation on Virtual Machines, Docker & Networking
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker Macvlan Network
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SreedeviRajavelu/VirtualMachines" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sree Devi’s Documentation on Virtual Machines, Docker &amp; Networking" class="md-nav__button md-logo" aria-label="Sree Devi’s Documentation on Virtual Machines, Docker & Networking" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sree Devi’s Documentation on Virtual Machines, Docker & Networking
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SreedeviRajavelu/VirtualMachines" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker, Virtual Machines & Networks
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DockerBuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Build
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker_Networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Docker Macvlan Network
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Docker Macvlan Network
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#docker-macvlan-network" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Macvlan Network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-choosing-the-correct-interface-to-create-mavvlan-network" class="md-nav__link">
    <span class="md-ellipsis">
      🧩 2️⃣ Choosing the correct interface to create Mavvlan network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-docker-macvlan-network-from-host-machine" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing docker macvlan network from host machine:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question" class="md-nav__link">
    <span class="md-ellipsis">
      Question:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-make-docker-container-reachable-from-vms-default-interface" class="md-nav__link">
    <span class="md-ellipsis">
      To make docker container reachable from VM's default interface :
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DockerEngine_Ubuntu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Engine on Ubuntu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CommunicationBetweenInsideAndOutsideDocker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Communication Inside & Outside Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker_Container_Interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Container Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker_tgz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using tarballs (.tgz)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker_Compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Compose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker_Volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Volumes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Virtualization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Virtualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VM-to-VM-Communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VM-to-VM Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Fix_Slow_UbuntuVM_Boot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fix Slow Ubuntu VM Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Recovering_VM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recovering VM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SSH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSH
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Matlab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matlab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Matlab_Docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matlab Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Wine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SQL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PostgreSQL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Matlab_Data_Sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matlab Data Sources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Remote_PortForwarding_SSH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Port Fowarding SSH
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../NAT_Adapter_Iptables_Forwarding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NAT Adapter Iptables Fowarding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Bridged_Adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bridged Adapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../File_Transfer_Host_To_Remote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Transfer Host To Remote
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Systemctl_Systemd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Systemctl Systemd
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SCADA
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            SCADA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ScadaLTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ScadaLTS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            OS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Mac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mac Notes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#docker-macvlan-network" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Macvlan Network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-choosing-the-correct-interface-to-create-mavvlan-network" class="md-nav__link">
    <span class="md-ellipsis">
      🧩 2️⃣ Choosing the correct interface to create Mavvlan network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-docker-macvlan-network-from-host-machine" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing docker macvlan network from host machine:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question" class="md-nav__link">
    <span class="md-ellipsis">
      Question:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-make-docker-container-reachable-from-vms-default-interface" class="md-nav__link">
    <span class="md-ellipsis">
      To make docker container reachable from VM's default interface :
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Docker Macvlan Network</h1>

<h2 id="docker-macvlan-network">Docker Macvlan Network</h2>
<p>A macvlan nerwork allows each Docker container to appear on the same Layer 2 network as your host (Ubuntu VM).</p>
<ul>
<li>
<p>Each container gets its <strong>own unique IP address</strong> on your <strong>physical LAN</strong> (e.g. 192.168.30.x)</p>
</li>
<li>
<p>The containers can be reached directly by other devices on that LAN - without NAT.</p>
</li>
</ul>
<p>Because of that, the macvlan network must be bound to your host's physical network interface (the one actually connected to your LAN or VM bridge).</p>
<h2 id="2-choosing-the-correct-interface-to-create-mavvlan-network">🧩 2️⃣ Choosing the correct interface to create Mavvlan network</h2>
<p><em>ip a output</em></p>
<pre><code>ubuntu@pgt:~$ ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:62:7e:2a brd ff:ff:ff:ff:ff:ff
    inet 192.168.30.60/24 brd 192.168.30.255 scope global enp0s3
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe62:7e2a/64 scope link 
       valid_lft forever preferred_lft forever
3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 52:18:4f:1d:0b:aa brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever
    inet6 fe80::5018:4fff:fe1d:baa/64 scope link 
       valid_lft forever preferred_lft forever
ubuntu@pgt:~$ 
</code></pre>
<p>From your ip a output:</p>
<p>2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP></p>
<pre><code>inet 192.168.30.60/24
</code></pre>
<p>✅ enp0s3 is UP, has a valid IPv4 (192.168.30.60/24), and is your main interface connected to the external network.</p>
<p>That makes enp0s3 the correct interface to use for a macvlan network.</p>
<p>The others:</p>
<p>lo — loopback (ignore)</p>
<p>docker0 — Docker’s internal bridge (not physical, so not usable for macvlan)</p>
<p>So yes, you should use enp0s3 for your macvlan setup.</p>
<p><img alt="alt text" src="../image-4.png" /></p>
<p>There are three private IPv4 address ranges defined by RFC 1918.
These are reserved for internal networks only (they are not routable on the public Internet).</p>
<table>
<thead>
<tr>
<th>Private Range</th>
<th>CIDR</th>
<th>Typical Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>10.0.0.0</code> – <code>10.255.255.255</code></td>
<td><code>/8</code></td>
<td>Large enterprise LANs</td>
</tr>
<tr>
<td><code>172.16.0.0</code> – <code>172.31.255.255</code></td>
<td><code>/12</code></td>
<td>Corporate or internal subnets</td>
</tr>
<tr>
<td><code>192.168.0.0</code> – <code>192.168.255.255</code></td>
<td><code>/16</code></td>
<td>Home, office, and VM networks</td>
</tr>
</tbody>
</table>
<p>ubuntu@pgt:~$ ip route</p>
<p>default via 192.168.30.1 dev enp0s3 proto static </p>
<p>172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown </p>
<p>192.168.30.0/24 dev enp0s3 proto kernel scope link src 192.168.30.60 </p>
<p>ubuntu@pgt:~$ </p>
<p>Create Docker macvlan network </p>
<p><code>docker network create -d macvlan --subnet=192.168.30.0/24 --gateway=192.168.30.1 -o parent=enp0s3 plc-macvlan</code></p>
<p>Persist Docker macvlan network:</p>
<h2 id="accessing-docker-macvlan-network-from-host-machine">Accessing docker macvlan network from host machine:</h2>
<ol>
<li>How Docker macvlan works</li>
</ol>
<p>When you create a Docker network using the macvlan driver, Docker gives each container its own virtual MAC address and attaches it directly to the physical network via the VM’s NIC (e.g., enp0s3).</p>
<p>Each container looks like a separate device on the LAN — it can communicate directly with:</p>
<p>Other containers on the same macvlan network</p>
<p>Other physical machines on the same LAN</p>
<p>But here’s the catch 👇</p>
<p>The host interface (the Ubuntu VM itself) is not automatically connected to this macvlan network.</p>
<p>This is by design — Linux macvlan interfaces cannot talk to their parent interface (and vice versa).</p>
<p>So the VM’s main NIC (enp0s3) cannot directly send or receive packets to/from containers on the macvlan network.</p>
<h2 id="question">Question:</h2>
<p>How do I create and persist a linux virtual network interface on the ubuntu VM so that I can access the docker containers which I create on the docker macvlan network inside the ubuntu vm on the host, these are the details of how I created the docker macvlan network and the docker container on the ubuntu vm create docker macvlan network on ubuntu vm (which I have sshed into):</p>
<ul>
<li>
<p><code>docker network create -d macvlan --subnet=192.168.30.0/24 --gateway=192.168.30.1 -o parent=enp0s3 plc-macvlan</code></p>
</li>
<li>
<p>create and run the docker container for plc in ubuntu vm : </p>
</li>
</ul>
<p><code>docker run -d --name st_plc--net plc-macvlan --ip 192.168.30.201 --privileged openplc:v3</code></p>
<p>I want to access this website on my host machine : http://192.168.30.201:8080/login</p>
<p>Perfect — you’ve explained this clearly, and your goal is exactly right 👏</p>
<p>You already have:</p>
<p>The Ubuntu VM running with IP 192.168.30.60 on interface enp0s3</p>
<p>A Docker macvlan network (plc-macvlan) attached to that interface</p>
<p>A PLC container with IP 192.168.30.201 on that macvlan</p>
<p>Now you want to access that container’s web UI (OpenPLC) from your host machine (e.g., your physical computer running VirtualBox, VMware, or similar).</p>
<p>Let’s go step-by-step and make the setup both functional and persistent.</p>
<p>🧠 Why This Is Needed
As you already know:</p>
<p>A macvlan network gives containers their own MAC addresses and puts them directly on the LAN.</p>
<p>But the Ubuntu VM itself (the host of the containers) can’t communicate with them, because Linux doesn’t allow the parent interface (enp0s3) to talk to its macvlan children.</p>
<p>Step 1: Create the macvlan interface (temporary test)</p>
<p>Run these inside your Ubuntu VM (SSH session):</p>
<pre><code># Create the macvlan0 interface attached to enp0s3
sudo ip link add macvlan0 link enp0s3 type macvlan mode bridge

# Assign a free IP in the same subnet (different from 192.168.30.60 and 192.168.30.1)
sudo ip addr add 192.168.30.254/24 dev macvlan0

# Bring it up
sudo ip link set macvlan0 up
</code></pre>
<p>Context: You are running a Docker container inside an Ubuntu VM, and that container is attached to a macvlan network (plc-macvlan). By design, a macvlan network isolates container traffic - the host (your VM) cannot communicate with containers on that macvlan unless you explicitly add a macvlan on the host side too.  </p>
<p>So the 3 commands above make the VM itself a part of the same network as the container.</p>
<ol>
<li>
<p><code>sudo ip link add macvlan0 link enp0s3 type macvlan mode bridge</code></p>
</li>
<li>
<p>creates a new virtual network interface called <code>macvlan0</code></p>
</li>
<li>
<p>this interface is <strong>attached</strong> to your physical network interface <code>enp0s3</code> (the one the VM uses to access your LAN)</p>
</li>
<li>
<p>the type <strong>macvlan</strong> creates a separate interface with its own MAC address </p>
</li>
<li>
<p><code>mode bridge</code> means that traffic on <code>enp0s3</code> will be bridged with <code>macvlan0</code> - both can send/receive packets in the same Layer 2 domain.</p>
</li>
</ol>
<p>Why is it needed:</p>
<ul>
<li>
<p>Docker's <code>macvlan</code> driver puts containers in the same L2 domain but isolates them from the host.</p>
</li>
<li>
<p>By creating <code>macvlan0</code>, your <strong>VM becomes reachable</strong> to and from containers in that macvlan network.</p>
</li>
<li>
<p><code>sudo ip addr add 192.168.30.254/24 dev macvlan0</code></p>
</li>
<li>
<p>Assigns an IP address (192.168.30.254) to the new <code>macvlan0</code> interface.</p>
</li>
<li>
<p>The <code>/24</code> subnet mask means it is part of the same 192.168.30.x network as your VM (<code>192.168.30.254</code>) and containers (like <code>192.168.30.201</code>).</p>
</li>
<li>
<p>it acts as the gateway for your VM to communicate with containers</p>
</li>
<li>
<p>without an IP, the VM can't send packets directly through macvlan0</p>
</li>
<li>
<p><code>sudo ip link set macvlan0 up</code></p>
</li>
<li>
<p>brings the macvlan0 interface online (equivalent to 'turning it on')</p>
</li>
<li>
<p>by default, new interfaces are down</p>
</li>
<li>
<p>this command activates it so it can actually pass network traffic</p>
</li>
</ul>
<p>After these steps: </p>
<p>VM can now <code>ping</code> and access containers on the plc-macvlan network e.g. 192.168.30.201</p>
<p><code>ping -I macvlan0 192.168.30.201</code></p>
<p>To persist the macvlan interface created above:</p>
<p>By default, <code>ip link add</code> changes are temporary and vanish after reboot.</p>
<p>To persist it across reboots, choose one of these methods:</p>
<p>Option 1: create a startup script + systemd service </p>
<p>Step 1:</p>
<ol>
<li>create the script:</li>
</ol>
<p><code>sudo nano /usr/local/sbin/setup-macvlan.sh</code></p>
<p>Paste:</p>
<pre><code>#!/bin/bash
ip link add macvlan0 link enp0s3 type macvlan mode bridge
ip addr add 192.168.30.254/24 dev macvlan0
ip link set macvlan0 up
</code></pre>
<ol>
<li>Make it executable:</li>
</ol>
<p><code>sudo chmod +x /usr/local/sbin/setup-macvlan.sh</code></p>
<p>Step 2:</p>
<ol>
<li>Create the systemd service file</li>
</ol>
<p><code>sudo nano /etc/systemd/system/setup-macvlan.service</code></p>
<ol>
<li>Paste this:</li>
</ol>
<pre><code>[Unit]
Description=Setup macvlan0 network interface
After=network.target

[Service]
Type=oneshot
ExecStart=/usr/local/sbin/setup-macvlan.sh
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Step 3: Reload and enable the service</p>
<p><code>sudo systemctl daemon-reload</code></p>
<p>Enable it to run automatically at reboot</p>
<p><code>sudo systemctl enable setup-macvlan.service</code></p>
<p>Test it immediately without rebooting:</p>
<p><code>sudo systemctl start setup-macvlan.service</code></p>
<p>Step 4: verify it worked </p>
<p>Check if the interface is up:
<code>ip addr show macvlan0</code></p>
<p>And verify service status:
<code>sudo systemctl status setup-macvlan.service</code></p>
<h2 id="to-make-docker-container-reachable-from-vms-default-interface">To make docker container reachable from VM's default interface :</h2>
<pre><code>sudo ip link add macvlan-host link enp0s3 type macvlan mode bridge
sudo ip addr add 192.168.30.250/24 dev macvlan-host
sudo ip link set macvlan-host up
</code></pre>
<p>1️⃣ Container is running and reachable from the VM
From your last command:
ping -I macvlan0 192.168.30.201
You get:
64 bytes from 192.168.30.201 ...
✅ This means inside the VM, the container is reachable via the macvlan0 interface. The container is up and responding to pings from the VM itself.
2️⃣ Container is not reachable from the VM’s default interface
When you just run:
ping 192.168.30.201
You get:
Destination Host Unreachable
This happens because Docker macvlan creates an isolated network, and the host VM’s default interface (enp0s3) cannot talk to the macvlan interface directly. This is a known limitation of macvlan:
A host cannot communicate with a container on a macvlan network by default.
3️⃣ How to reach the container from the host machine (your physical machine or host VM)
Since your VM is attached as Bridged Adapter, the host machine is on the same subnet (192.168.30.0/24) as your container. To reach the container:
Option A: Add a macvlan sub-interface on the host machine
You need to create a macvlan interface on your host machine, attached to the same physical network as the VM.
Give it an IP in the same subnet (but not conflicting with gateway, VM, or container IPs).
Example on host:
sudo ip link add macvlan-host link <host_interface> type macvlan mode bridge
sudo ip addr add 192.168.30.250/24 dev macvlan-host
sudo ip link set macvlan-host up
Then ping:
ping 192.168.30.201</p>
<p>TROUBLESHOOTING :</p>
<pre><code>ping -I macvlan0 192.168.30.201   # works
ping 192.168.30.201               # fails
</code></pre>
<p>1️⃣ What’s wrong currently
From docker inspect plc-macvlan:
"Subnet": "192.168.30.0/24",
"Gateway": "192.168.30.1",
"Options": { "parent": "enp0s3" }
Your macvlan network for containers is on the same subnet as your VM’s default interface (192.168.30.0/24).
Your VM’s IP is 192.168.30.60.
Your containers have IPs like 192.168.30.201.
Linux cannot send packets from the parent interface (enp0s3) to macvlan child interfaces on the same subnet. This is a known limitation of macvlan:
Host ↔ Macvlan containers on the same L2 subnet is blocked unless you use a separate “macvlan-host” interface with a different subnet or routing.</p>
<p>2️⃣ What you need to change
Solution: put your macvlan containers on a different subnet, e.g., 192.168.40.0/24. Then:
Use a “host macvlan interface” (macvlan-host) on the VM in the same subnet, e.g., 192.168.40.254.
Enable IP forwarding + iptables NAT to allow the VM and host to reach the container network.</p>
<p>I will have 4 different docker containers for 4 plcs on the ubuntu vm hence using the same url and the same ssh method of accessing every plc will not make sense, how can I use the unique ip address of each plc container to access the browser</p>
<p>http://localhost:8080/dashboard</p>
<p>ssh -L 8080:192.168.40.201:8080 ubuntu@192.168.30.60</p>
<p>Perfect — that’s exactly the right way to think about this.
Since you’ll be running 4 PLC containers, each with a unique IP (e.g., 192.168.40.201, 192.168.40.202, etc.) on the macvlan network, you want to be able to access each PLC’s web interface directly by its IP instead of tunneling everything to localhost:8080.
Let’s go step by step 👇
🧠 Why the problem happens
The reason you can’t currently access 192.168.40.x IPs from your Remote Desktop host (or from your own PC) is that macvlan networks isolate traffic from the parent host interface.
That means:
The Ubuntu VM can talk to the containers ✅
But the Remote Desktop host (the VM’s hypervisor host) cannot ❌
Nor can your own machine (accessing via Remote Desktop or SSH) ❌
So, even though the containers have unique IPs, those IPs exist only inside the VM’s internal macvlan network.</p>
<p>🧩 To fix this — you have two design options:
Option 1: Add a second adapter (NAT or Host-only) + iptables forwarding
This approach lets you access each PLC by its unique IP directly — without using SSH tunneling or localhost.
Step 1: Add another network adapter to your Ubuntu VM
In your VM settings (in VirtualBox, VMware, etc.):
Keep the Bridged Adapter (this is your current enp0s3).
Add a second adapter:
Type: NAT (or Host-only)
Name: automatically created, e.g. enp0s8 in Ubuntu.
This will give your VM a second IP (say, 10.0.2.15 for NAT or 192.168.56.101 for host-only).
Step 2: Enable IP forwarding
Inside the Ubuntu VM:
sudo sysctl -w net.ipv4.ip_forward=1</p>
<p>To persist it:
echo "net.ipv4.ip_forward=1" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
Step 3: Forward each PLC port range
Let’s say you have these PLC containers:
PLC Container IP    Web Port    External Port
PLC1    192.168.40.201  8080    8081
PLC2    192.168.40.202  8080    8082
PLC3    192.168.40.203  8080    8083
PLC4    192.168.40.204  8080    8084</p>
<p>Add forwarding rules:
sudo iptables -t nat -A PREROUTING -p tcp -d <VM_IP> --dport 8081 -j DNAT --to-destination 192.168.40.201:8080
sudo iptables -t nat -A PREROUTING -p tcp -d <VM_IP> --dport 8082 -j DNAT --to-destination 192.168.40.202:8080
sudo iptables -t nat -A PREROUTING -p tcp -d <VM_IP> --dport 8083 -j DNAT --to-destination 192.168.40.203:8080
sudo iptables -t nat -A PREROUTING -p tcp -d <VM_IP> --dport 8084 -j DNAT --to-destination 192.168.40.204:8080</p>
<p>sudo iptables -t nat -A POSTROUTING -j MASQUERADE
Replace <VM_IP> with the Ubuntu VM’s default bridged IP (the one reachable from your Remote Desktop).
Step 4: Access from Remote Desktop or your own PC
Now you can open, from Remote Desktop or your own machine:
http://<VM_IP>:8081/login → PLC1
http://<VM_IP>:8082/login → PLC2
http://<VM_IP>:8083/login → PLC3
http://<VM_IP>:8084/login → PLC4
✅ Each one maps uniquely to the right container.
To persist the iptables rules:
sudo apt install iptables-persistent
sudo netfilter-persistent save
Option 2: Bridge the macvlan directly to the Remote Desktop network
This is more complex but allows direct IP access (e.g., you could ping 192.168.40.201 directly from your Remote Desktop host).
However:
You must ensure the Remote Desktop’s LAN supports the 192.168.40.0/24 subnet.
The Remote Desktop’s physical adapter must allow macvlan bridge mode.
If multiple VMs use the same network, you may have IP conflicts.
If your VM is on a corporate or managed network, this method is not recommended — Option 1 (NAT + iptables) is safer and works everywhere.
Summary
Goal    Recommended Solution
Access PLC browser from Remote Desktop  Use iptables port forwarding from VM IP to container IP
Access PLC browser from your own host PC    Use same forwarding — just access VM’s bridged IP
Keep separate PLC dashboards    Assign unique external ports (8081–8084)
Keep setup persistent   Use iptables-persistent or a startup script
Would you like me to give you the exact command sequence and a ready-to-use startup script that automatically sets up this forwarding for all 4 PLCs whenever the VM boots?</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>